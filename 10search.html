<html>
  <head>
    <title>最近十筆的帳</title>
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
    <link rel="stylesheet" href="css/boostrap.css">
    <script src="js/main.js"> </script>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script src="js/jquery.js"> </script>
    <script src="js/bootstrap.js"> </script>
    <script src="js/fdb.js"> </script>
  </head>
  
  <body>
    <br>
    <br>
    <h1 class="cen-ter">最近十筆的帳</h1>
    <br>
    <br>
    <br>
    <br>
    <table class="table">
      <thead>
        <tr>
          <th> </th>
          <th class="textWhite">類別</th>
          <th class="textWhite">項目</th>
          <th class="textWhite">金額</th> 
          <th class="textWhite">日期</th>
        </tr>
      </thead>
      <tbody id=table>
      
      </tbody>
    </table>
    
    <script>
      
      var fdb = new ForerunnerDB();
      var db = fdb.db("DB");
      var expensesCollection = db.collection("expenses");
      expensesCollection.load();
      var search10 = expensesCollection.find(
        {},
        {$limit: 10,$OrderBy:{date:-1}}
      );
      
      var categories={
        餐飲:"餐飲",
        衣物:"衣物",
        居住:"居住",
        交通:"交通",
        娛樂:"娛樂",
        學習:"學習",
        其他:"其他"
      };
      
      $("tbody").html("");
      var count = 0;
      for (i=0,i<10,i++){
        $("#table").append("<tr><td> </td><td>"+categories[search10[count].categoryId-1]+"</td><td>"+search10[count].name+"</td><td>"+search10[count].amount+"</td><td>"+search10[count].date+"</td></tr>");
        count = count + 1;
      }
      
    </script>
  </body>
<html>
